{% extends "keysmith/base.html" %}
{% block title %}Your Tokens{% endblock %}
{% block content %}
<h2>Your Tokens</h2>

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Hint</th>
            <th>Type</th>
            <th>Status</th>
            <th>Expires At</th>
            <th>Last Used</th>
        </tr>
    </thead>
    <tbody>
        {% for token in tokens %}
        <tr>
            <td>
                <a href="{% url 'keysmith:token_detail' token.pk %}">{{ token.name }}</a>
            </td>
            <td>{{ token.hint }}</td>
            <td>{{ token.get_type_display }}</td>
            <td>
                {% if token.revoked %}
                    <span class="status-revoked">Revoked</span>
                {% elif token.expires_at and token.expires_at < now %}
                    <span class="status-revoked">Expired</span>
                {% else %}
                    <span class="status-active">Active</span>
                {% endif %}
            </td>
            <td>{{ token.expires_at|date:"Y-m-d H:i" }}</td>
            <td>{{ token.last_used_at|default:"Never" }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="6">No tokens yet.</td></tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
